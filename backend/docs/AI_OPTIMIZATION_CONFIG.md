# AI优化配置说明

## 概述

AI优化配置允许您自定义文章处理过程中的AI检测和优化行为，包括最大尝试次数、AI浓度阈值等关键参数。

## 配置方式

### 1. 通过Web界面配置（推荐）

1. 访问系统主页面
2. 点击左侧导航栏的"系统设置"
3. 在"AI优化配置"卡片中修改参数
4. 点击"保存配置"按钮

### 2. 通过环境变量配置

在 `.env` 文件中设置以下环境变量：

```bash
# AI优化最大尝试次数
AI_OPTIMIZATION_MAX_ATTEMPTS=5

# AI浓度阈值
AI_OPTIMIZATION_THRESHOLD=25.0

# 重试间隔秒数
AI_OPTIMIZATION_RETRY_DELAY=2

# 是否启用渐进式优化
AI_OPTIMIZATION_PROGRESSIVE=true
```

## 配置参数详解

### 最大尝试次数 (max_attempts)

- **默认值**: 5
- **取值范围**: 1-20
- **说明**: AI优化的最大尝试次数。当文章的AI浓度超过阈值时，系统会尝试优化内容，此参数控制最多尝试几次。

**建议设置**:
- **快速处理**: 3次 - 适合对处理速度要求较高的场景
- **标准处理**: 5次 - 平衡处理质量和速度
- **深度优化**: 8-10次 - 适合对内容质量要求极高的场景

### AI浓度阈值 (threshold)

- **默认值**: 25.0
- **取值范围**: 0-100
- **说明**: AI检测通过的阈值百分比。当文章的AI浓度低于此值时，认为检测通过。

**建议设置**:
- **宽松标准**: 30-40% - 适合内容要求不太严格的平台
- **标准要求**: 20-30% - 适合大多数平台的要求
- **严格标准**: 10-20% - 适合对原创性要求极高的平台

### 重试间隔 (retry_delay_seconds)

- **默认值**: 2
- **取值范围**: 0-60
- **说明**: 每次优化尝试之间的等待时间（秒）。

**建议设置**:
- **快速模式**: 0-1秒 - 无延迟或短延迟
- **标准模式**: 2-5秒 - 给系统一些缓冲时间
- **保守模式**: 5-10秒 - 避免频繁请求

### 渐进式优化 (enable_progressive_optimization)

- **默认值**: true
- **说明**: 是否启用渐进式优化。启用后，系统会根据尝试次数逐步加强优化强度。

**优化策略**:
- **第1-2次**: 标准优化 - 轻度调整
- **第3-4次**: 重度优化 - 中度调整  
- **第5次及以上**: 极限优化 - 深度重写

## 处理流程

### 主题创作文章

1. **内容创作**: 根据主题+提示词+字数限制创作内容
2. **立即检测**: 对创作内容进行AI检测
3. **条件优化**: 如果AI浓度 ≥ 阈值，启动优化循环
4. **循环处理**: 重复"优化→检测"直到通过或达到最大尝试次数

### URL导入文章

1. **内容提取**: 从URL提取文章内容
2. **内容翻译**: 如果需要，进行语言翻译
3. **优化检测**: 进行优化和AI检测循环

## 性能影响

### 尝试次数对性能的影响

| 尝试次数 | 预估处理时间 | 适用场景 |
|---------|-------------|----------|
| 1-3次   | 30秒-2分钟  | 快速处理 |
| 4-6次   | 2-5分钟     | 标准处理 |
| 7-10次  | 5-10分钟    | 深度优化 |
| 10次以上 | 10分钟以上  | 极限优化 |

### 阈值对通过率的影响

| 阈值范围 | 通过难度 | 预期通过率 |
|---------|---------|-----------|
| 40%以上 | 容易    | 90%以上   |
| 25-40% | 中等    | 70-90%    |
| 15-25% | 困难    | 50-70%    |
| 15%以下 | 极难    | 30%以下   |

## 最佳实践

### 1. 根据平台要求调整

- **今日头条**: 阈值25%，尝试5次
- **微信公众号**: 阈值20%，尝试6-8次
- **知乎**: 阈值30%，尝试3-5次

### 2. 根据内容类型调整

- **新闻资讯**: 阈值30%，快速处理
- **深度文章**: 阈值20%，标准处理
- **原创内容**: 阈值15%，深度优化

### 3. 监控和调优

- 定期查看处理日志
- 统计不同配置的成功率
- 根据实际效果调整参数

## 故障排除

### 常见问题

1. **处理时间过长**
   - 减少最大尝试次数
   - 适当提高AI浓度阈值

2. **通过率过低**
   - 适当降低AI浓度阈值
   - 增加最大尝试次数
   - 启用渐进式优化

3. **系统负载过高**
   - 增加重试间隔
   - 减少并发处理数量

### 日志分析

查看处理日志中的关键信息：
- AI检测结果和概率
- 优化尝试次数
- 每次尝试的耗时
- 最终处理结果

## API接口

### 获取配置

```http
GET /api/v1/config/ai-optimization
```

### 更新配置

```http
POST /api/v1/config/ai-optimization
Content-Type: application/json

{
    "max_attempts": 5,
    "threshold": 25.0,
    "retry_delay_seconds": 2,
    "enable_progressive_optimization": true
}
```
